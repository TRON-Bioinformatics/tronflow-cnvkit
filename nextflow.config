/*
 * -------------------------------------------------
 *  TRON-Bioinformatics/tronflow-bam-preprocessing Nextflow config file
 * -------------------------------------------------
 * Default config options for all environments.
 */

process {
    withName: CNVKIT_BATCH {
        publishDir = [
            path: { "${params.output}" },
            mode: 'copy'
        ]
    }
}

profiles {
  conda { params.enable_conda = true }
  debug { process.beforeScript = 'echo $HOSTNAME' }
  test {
    params.input_files = "test_data/test_input.txt"
    params.reference = "$baseDir/test_data/ucsc.hg19.minimal.fasta"
    params.intervals = "$baseDir/test_data/minimal_intervals.bed"
    timeline.enabled = false
    report.enabled = false
    trace.enabled = false
    dag.enabled = false
  }
}

// Export this variable to prevent local Python libraries from conflicting with those in the container
env {
  PYTHONNOUSERSITE = 1
}

// Capture exit codes from upstream processes when piping
process.shell = ['/bin/bash', '-euo', 'pipefail']

cleanup = true

VERSION = '0.1.0'
DOI = 'doi'

manifest {
  name = 'TRON-Bioinformatics/tronflow-cnvkit'
  author = 'Pablo Riesgo-Ferreiro, Jonas ibn-Salem'
  homePage = 'https://github.com/TRON-Bioinformatics/tronflow-cnvkit'
  description = 'CNVkit pipeline'
  mainScript = 'main.nf'
  nextflowVersion = '>=19.10.0'
  version = VERSION
  doi = DOI
}
params.manifest = manifest

params.help_message = """

  """
